Windowsで環境変数のPATHを追加する方法沢山
=============================

# まとめ

PHPの場合は、Composer-setupをつかうと、Composerが入りつつ、PHPにもPATHが通るので便利。
[https://getcomposer.org/Composer-Setup.exe](https://getcomposer.org/Composer-Setup.exe)
（古いWindowsではどうなるかわかりません）

Windows 2000、XPまではマイコンピューターの右クリックから設定を開始する。

Windows 7以降はコンパネのシステムとセキュリティ〜から設定を開始する。

VistaはXPと7の中間。

# 普段から環境変数を頻繁に書き換えてる人は

[RapidEE](http://www.rapidee.com/en/about)などのツールを使うと捗ると思います。

# setxコマンドをつかってコマンドラインから設定（Vista以降）

setxコマンドがWindows Vista以降では使える（XP以前にはない（らしいが未調査））
これはコマンドラインから永続的な設定が一発で行えるために非常に便利である。

具体的には以下のように指定する。

```
SETX /M PATH "%PATH%;c:\xampp\php"
```

管理者権限で実行する必要があるので、コマンドプロンプト（cmd.exe）を以下のようにして起動する。


コマンドプロンプトのアイコンを右クリックして管理者で実行（スクリーンショットはWindows8、7以下はスタートメニューから）

![](images/setx_1.png)
![](images/setx_2.png)

pathコマンドで現在のパスを確認（一応なので、作業としては不要、ウッカリ消したときに戻すためにメモしたほうがよい。cmdでは右クリックからマークで選択、Enterでコピーできる。ペーストも右クリックから）

![](images/setx_3.png)

設定コマンドを入力し、実行する。

![](images/setx_4.png)

コマンドプロンプトを再度立ち上げ直して反映されていることを確認する。

![](images/setx_5.png)

もし管理者権限のないユーザーで実行すると、「エラー：レジストリパスへのアクセスが拒否されました。」などと出力されます。



# Windows 2000

マイコンピューターを右クリックしてプロパティを開く

![](images/2000_1.png)

詳細タブの環境変数ボタンをクリックする

![](images/2000_2.png)

環境変数設定画面が開くので、システム環境変数の変数名「Path」を選択し、編集ボタンを押す。
（この辺りは多少個人の好みもあるとおもいますが、今回は最短でいきます）

![](images/2000_3.png)

「システム変数の編集」というダイアログがでるので、変数値を編集する。
この時、目的のパスが「c:\xampp\php\」ならば、最後に「;c:\xampp\php\」などと追加する。（セミコロンを頭につける）
既存をまちがってけしたりしたら、キャンセルする。

問題がなければ、OKをおして保存する。コマンドプロンプトをあたらしくひらいて、実際に必要なプログラムを実行してみてパスが通っているか確認する。
「path」というコマンドでも確認できる。


# Windows XP

![](images/xp_1.png)

スタートメニューを押し、マイコンピューターを右クリックしてプロパティを開く

![](images/xp_2.png)

システムのプロパティが開くので、詳細設定タブを開き、環境変数ボタンを押す

![](images/xp_3.png)

環境変数設定画面が開くので、システム環境変数の変数名「Path」を選択し、編集ボタンを押す。
（この辺りは多少個人の好みもあるとおもいますが、今回は最短でいきます）

![](images/xp_4.png)

「システム変数の編集」というダイアログがでるので、変数値を編集する。
この時、目的のパスが「c:\xampp\php\」ならば、最後に「;c:\xampp\php\」などと追加する。（セミコロンを頭につける）
既存をまちがってけしたりしたら、キャンセルする。

問題がなければ、OKをおして保存する。コマンドプロンプトをあたらしくひらいて、実際に必要なプログラムを実行してみてパスが通っているか確認する。
「path」というコマンドでも確認できる。


# Windows Vista
(英語版ですが、画面構成は同じなので、適当に読み替えてください)
冒頭で紹介したSETXをつかわないGUIの設定は以下の通り

![](images/vista_1.png)

スタートメニューを押し、マイコンピューターを右クリックしてプロパティを開く

![](images/vista_2.png)

左下のシステムの詳細設定を開く

![](images/vista_3.png)

UACのダイアログがでるので、許可する

![](images/vista_4.png)

システムのプロパティの詳細設定タブ、環境変数ボタンを押す

![](images/vista_5.png)

環境変数設定画面が開くので、システム環境変数の変数名「Path」を選択し、編集ボタンを押す。
（この辺りは多少個人の好みもあるとおもいますが、今回は最短でいきます）

![](images/vista_6.png)

「システム変数の編集」というダイアログがでるので、変数値を編集する。
この時、目的のパスが「c:\xampp\php\」ならば、最後に「;c:\xampp\php\」などと追加する。（セミコロンを頭につける）
既存をまちがってけしたりしたら、キャンセルする。

問題がなければ、OKをおして保存する。コマンドプロンプトをあたらしくひらいて、実際に必要なプログラムを実行してみてパスが通っているか確認する。
「path」というコマンドでも確認できる。



# Windows 7
(英語版ですが、画面構成は同じなので、適当に読み替えてください)
冒頭で紹介したSETXをつかわないGUIの設定は以下の通り

![](images/7_1.png)

スタートメニューをクリックして、コントロールパネルを開く。

![](images/7_2.png)

システムとセキュリティをひらく

![](images/7_3.png)

システムをひらく

![](images/7_4.png)

左下のシステムの詳細設定を開く

![](images/7_5.png)

システムのプロパティの詳細設定タブ、環境変数ボタンを押す

![](images/7_6.png)

環境変数設定画面がひらくので、システム環境変数の、変数名「Path」を選択し、編集ボタンを押す。
（この辺りは多少個人の好みもあるとおもいますが、今回は最短でいきます）

![](images/7_7.png)

「システム変数の編集」というダイアログがでるので、変数値を編集する。
この時、目的のパスが「c:\xampp\php\」ならば、最後に「;c:\xampp\php\」などと追加する。（セミコロンを頭につける）
既存をまちがってけしたりしたら、キャンセルする。

問題がなければ、OKをおして保存する。コマンドプロンプトをあたらしくひらいて、実際に必要なプログラムを実行してみてパスが通っているか確認する。
「path」というコマンドでも確認できる。


# Windows 8
冒頭で紹介したSETXをつかわないGUIの設定は以下の通り

![](images/8_1.png)

スタートメニューをクリックして、コントロールパネルを開く。

![](images/8_2.png)

システムとセキュリティをひらく

![](images/8_3.png)

システムをひらく

![](images/8_4.png)

左下のシステムの詳細設定を開く

![](images/8_5.png)

システムのプロパティの詳細設定タブ、環境変数ボタンを押す

![](images/8_6.png)

環境変数設定画面がひらくので、システム環境変数の、変数名「Path」を選択し、編集ボタンを押す。
（この辺りは多少個人の好みもあるとおもいますが、今回は最短でいきます）

![](images/8_7.png)

「システム変数の編集」というダイアログがでるので、変数値を編集する。
この時、目的のパスが「c:\xampp\php\」ならば、最後に「;c:\xampp\php\」などと追加する。（セミコロンを頭につける）
既存をまちがってけしたりしたら、キャンセルする。

問題がなければ、OKをおして保存する。コマンドプロンプトをあたらしくひらいて、実際に必要なプログラムを実行してみてパスが通っているか確認する。
「path」というコマンドでも確認できる。


# PHPならComposer インストールと一緒にやっちゃう

PHPのパッケージマネージャであるところの[Composer](https://getcomposer.org/)を、コマンドラインでなく、GUIのインストーラーで導入すると同時にPHPのPathも設定もらうことができます。結構便利なのに、非常にわかりづらい所においてありますね。

[https://getcomposer.org/doc/00-intro.md#using-the-installer](https://getcomposer.org/doc/00-intro.md#using-the-installer)
[Composer-Setup.exe](https://getcomposer.org/Composer-Setup.exe)をDLして、実行する。

事前にXAMPPなどのインストールは行っておく必要があります

（以下英語なので、日本語の人はフィーリングで置き換えして読んで下さい、ボタン配置は一緒だとおもいますので）

![](images/composer_1.png)

ダウンロードしたインストーラーを開きます。


![](images/composer_2.png)

UACの許可をします


![](images/composer_3.png)
![](images/composer_4.png)

ここはお好みで（ShellMenuは右クリックでComposer実行できるようにするか？ですが、果たして便利なの？）


![](images/composer_5.png)

この画面で、PHPのバイナリ（php.exe）の場所を指定します。
最近のXAMPPなら、`c:\xampp\php\php.exe`になると思います。
直接入力欄に場所（PATH）をいれるか、Browseをおして、ファイルダイアログから選択します。

この画面、再インストール時の画面なので、最初のインストール時には、下の「Choose a different 〜」は多分表示されていません。


![](images/composer_6.png)

問題なければ、インストールが進みます。


![](images/composer_7.png)
![](images/composer_8.png)

完了です。


![](images/composer_9.png)

完了したら、新しくコマンドプロンプトをひらいて、`php -v`と実行してみましょう。PATHが通っているならversionが表示されるはずです！

当然ではありますが、Composerもパスが通りますので`composer`で、Composerを動作させる事も可能です。

（しかし、強いて言えば、どうせなら、「C:\Users\ユーザー名\AppData\Roaming\Composer\vendor\bin」にもPathを通してくれればもっと簡単便利なんですけどねえ…）


# （定型文）

Microsoft、Windows、Windows 2000、Windows Vista、Windows 7、Windows 8、Windows Server 2012、Windows Server またはその他のマイクロソフト製品の名称および製品名は、米国Microsoft Corporationの米国およびその他の国における商標または登録商標です。

# 本ドキュメントのライセンス

（「スクリーンショット」というものが引用にできるのかわからぬが）

本文の部分はMITです。

# 謝辞

@hajime さん
@r_ohki さん
@hondallica さん

情報ありがとうございました！！
